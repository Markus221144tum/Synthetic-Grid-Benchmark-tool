Hier ist der **überarbeitete und vollständige README-Fließtext auf Englisch**, im GitHub-kompatiblen Markdown-Format (`#`, `-`, `+`, etc.), mit korrigierter Grammatik, einheitlichem Stil und all deinen Punkten integriert:

---

# Synthetic Grid Benchmark Tool

This benchmark tool is designed to systematically and quantitatively compare real and synthetically generated power grid networks. Its goal is to evaluate how realistic synthetic networks are, especially when compared to reference datasets such as **SimBench** or **DINGO**. It supports both conventional **pandapower-based network formats** and synthetic graph-based models, including `.pt` files generated by machine learning architectures.

Upon launching the tool via command line, you provide two datasets — one labeled as `--real`, the other as `--synthetic`. You can point to local folders (e.g., `.json`, `.pkl`, or `.pt` files) or rely on the built-in SimBench integration to fetch predefined networks. The tool then loads, filters (e.g., by voltage level or region), and transforms the networks into a uniform format based on **NetworkX**. Subsequently, it calculates a rich set of **topological** and **system-level** metrics. All results are saved as structured `.json` files and visualized through plots.

In addition, the tool automatically generates a visual graph layout of each network. These are saved as images for easy inspection and overview. This feature is defined in the main script and should be **disabled when working with large datasets**, as it may generate a high number of plot files.

---

### Supported Input Formats

* SimBench codes (downloaded automatically)
* Pandapower `.json` files
* CSV-based Pandapower exports
* Pickle files from **DINGO**
* PyTorch `.pt` files with `edge_index` tensors

---

## Layers of Comparison

The benchmark currently computes two complementary layers of metrics:

1. **Topological properties** – Graph-theoretical metrics derived from the network structure, independent of physical or electrical values.
2. **System properties** – Electrical and infrastructure metrics derived from grid components such as buses, lines, loads, and transformers.

The tool is modular and easily extensible. Additional metric layers or data types can be added with minimal effort.

---

### Project Structure

```
main.py                              # Main entry point via command line
real_vs_synth/
├── analysis/
│   └── comparer.py                  # Coordinates metric calculation and visualizations
├── data/
│   ├── cvs_loader.py                # Loader for pandapower CSV datasets
│   ├── simbench_loader.py           # Automatic loader for SimBench codes
│   ├── pkl_loader.py                # Loader for DINGO .pkl files
│   ├── pt_loader.py                 # Loader for .pt graph data (edge_index)
│   └── synthetic_loader.py          # Loader for JSON-based pandapower models
├── metrics/
│   ├── topological_characteristics.py  # Implements graph-based metrics
│   └── system_characteristics.py       # Extracts electrical infrastructure stats
├── model/
│   └── network.py                   # Wrapper combining pandapower with NetworkX
└── viz/
    └── plt_comparison.py           # Visualization: bar charts, box plots, graph plots
README.md                           # This documentation
```

---

### Visualization

The tool automatically generates plots for:

* **Real networks** using `pandapower.plotting`
* **Synthetic networks** using NetworkX layout algorithms
* Bar plots and box plots for each metric
* Gaussian distributions for statistical insight into metric variation

Image files are saved in the `metrics_json/` and `comparison_plots/` folders.

---

## System Requirements and Installation

All dependencies are listed in `requirements.txt`. It is recommended to use a virtual environment.

### With Conda (recommended):

```bash
conda create -n benchmark_env python=3.11
conda activate benchmark_env
pip install -r requirements.txt
```

### With pip only:

```bash
pip install -r requirements.txt
```

For full plotting support (e.g., graph plots with `igraph`), use:

```bash
pip install pandapower[all]
```

---

## Quick Start – Command Line Examples

### SimBench vs. SimBench (all levels):

```bash
python main.py --real simbench --synthetic simbench
```

### LV Rural vs. LV Urban (SimBench only):

```bash
python main.py --real simbench --real_level LV --real_region r --synthetic simbench --synthetic_level LV --synthetic_region c
```

### HV mixed vs. HV mixed:

```bash
python main.py --real simbench --real_level HV --real_region m --synthetic simbench --synthetic_level HV --synthetic_region m
```

### Real vs. Synthetic – using local folders:

```bash
python main.py --real "real_vs_synth/data/1-LV-rural1--1-no_sw/train" --synthetic "real_vs_synth/data/1-LV-rural1--1-no_sw/train"
python main.py --real simbench --synthetic "real_vs_synth/data/1-LV-rural1--1-no_sw/train"
python main.py --real "real_vs_synth/data/dingo_grids_1-100" --synthetic "real_vs_synth/data/1-LV-rural1--1-no_sw/train"
python main.py --real "real_vs_synth/data/1-LV-rural1--1-no_sw/train" --synthetic "real_vs_synth/data/dingo_grids_3601-3608"
```

### Comparing PyTorch `.pt` Graphs:

```bash
python main.py --real "real_vs_synth/data/generated_nets" --synthetic "real_vs_synth/data/1-LV-rural1--1-no_sw/train"
```

> The terms `--real` and `--synthetic` are just labels. You can assign datasets freely — the tool automatically detects their format and voltage level.

---

## How the Code Works

### 1. Loading and Normalization

The input is automatically detected as:

* SimBench code (fetched via API)
* Folder with `.csv`, `.json`, `.pkl`, or `.pt` files

Voltage levels are inferred via `bus.vn_kv` and mapped to LV/MV/HV/Extra-HV.

### 2. Network Representation

All networks are transformed into a **NetworkX graph**. For `.pt` files, the tool extracts `edge_index` and builds the graph directly. For `.pkl` files (DINGO), the loader reconstructs a full `pandapower` grid before analysis.

### 3. Metric Computation

#### Topological Metrics:

| Metric                    | Description                          | Output Format                |
| ------------------------- | ------------------------------------ | ---------------------------- |
| Node degree               | Direct neighbors of each node        | Mean, std, full distribution |
| Clustering coefficient    | Triangle closure rate                | Mean, std, distribution      |
| Path length               | Shortest-path lengths                | Mean, full distribution      |
| Diameter                  | Longest shortest path                | Scalar                       |
| Betweenness centrality    | Node importance on shortest paths    | Mean, std, distribution      |
| Assortativity coefficient | Degree correlation between neighbors | Scalar                       |
| Meshness                  | Loops vs. spanning tree complexity   | Scalar                       |

#### System Metrics:

* Line lengths (total, per customer, per km²)
* Overhead vs. underground share
* Transformer counts and properties (kVA, X/R)
* Load (P/Q, PF, per customer)
* Generation: PV, wind, others
* Customers per transformer

Each metric is calculated:

* As a **mean** value (for bar plots)
* As a **distribution** across networks (for box plots)

### 4. Results and Output

* `results/metrics_summary.json`: Overall metric summary
* `results/topological_distributions.json` and `system_distributions.json`: Full raw distributions
* `metrics_json/*.png`: Individual network plots
* `comparison_plots/`: All comparative metric figures

### 5. Visualization

The tool produces:

* **Figure 1:** Bar plot – topological metrics
* **Figure 2:** Box plot – topological metrics
* **Figure 3:** Bar plot – system metrics
* **Figure 4:** Box plot – system metrics
* **Figure 5:** Gaussian distribution curves for selected key metrics (mean, std)

If a metric has zero values across all networks, it is skipped and listed in the terminal. Remaining plots adjust automatically.

---

## Interpreting the Output

* **Color Coding**: Real = blue, Synthetic = orange
* **Bar Gaps**: Large differences suggest realism gaps
* **Box Separation**: Non-overlapping ranges may indicate fundamental structural differences
* **Missing Values**: You’ll be notified if metrics are skipped due to empty or invalid data

Example:

```text
Skipped system metrics (all values zero):
- pv_kw
- wind_kw
```

---

## Extending the Tool

* Add new metrics in `metrics/`, then call them in `comparer.py`
* Add loaders for new formats in `data/`
* For automated reports, replace `plt.show()` with `plt.savefig()` in `viz/`

---

## Support

For feature requests, improvements, or bug reports, feel free to create an issue or pull request. Contributions are always welcome.

---

**Happy benchmarking!** ⚡

---

Möchtest du diesen Text direkt als `README.md`-Datei speichern, kann ich ihn dir auf Wunsch generieren.
